/******************************************************************************

*(C) Copyright 2007 Marvell International Ltd.

* All Rights Reserved

******************************************************************************/
/*--------------------------------------------------------------------------------------------------------------------
 *  INTEL CONFIDENTIAL
 *  Copyright 2006 Intel Corporation All Rights Reserved.
 *  The source code contained or described herein and all documents related to the source code (?Material? are owned
 *  by Intel Corporation or its suppliers or licensors. Title to the Material remains with Intel Corporation or
 *  its suppliers and licensors. The Material contains trade secrets and proprietary and confidential information of
 *  Intel or its suppliers and licensors. The Material is protected by worldwide copyright and trade secret laws and
 *  treaty provisions. No part of the Material may be used, copied, reproduced, modified, published, uploaded, posted,
 *  transmitted, distributed, or disclosed in any way without Intel?s prior express written permission.
 *
 *  No license under any patent, copyright, trade secret or other intellectual property right is granted to or
 *  conferred upon you by disclosure or delivery of the Materials, either expressly, by implication, inducement,
 *  estoppel or otherwise. Any license under such intellectual property rights must be express and approved by
 *  Intel in writing.
 *  -------------------------------------------------------------------------------------------------------------------
 *
 *  Filename: telcontroller.c
 *
 *  Authors:  Vincent Yeung
 *
 *  Description: Telephony Controller implementation
 *
 *  History:
 *   May 19, 2006 - Creation of file
 *
 *  Notes:
 *
 ******************************************************************************/

/******************************************************************************
*   include files
******************************************************************************/
#include "ci_api.h"
#include "ps_api.h"
#include "telcontroller.h"
#include "telatci.h"
#include "telconfig.h"
#include "telatparamdef.h"  //TEL_AT_CMDSTR_MAX_LEN
#include "teldbg.h"
#include "telcc.h"
#include "telmm.h"
#include "telps.h"
#include "telpb.h"
#include "telss.h"
#include "teldev.h"
#include "teldat.h"
#include "telmsg.h"
#include "telsim.h"
#ifdef AT_PRODUCTION_CMNDS
#include "telprod.h"
#include "prod_api.h"
#endif
#ifdef AT_LABTOOL_CMNDS
#include "telmisc.h"
#endif
#include "utlMalloc.h"
#include <stdio.h>
#include <unistd.h>
#include <termios.h>
#include <fcntl.h>
#include <osa.h>
#include <sys/time.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/syscall.h>
/******************************************************************************
*   Define
******************************************************************************/

/******************************************************************************
*   Global Variable for Telephony Controller
******************************************************************************/

unsigned short gusXid = 10; //0 - 10 is reserved value
struct termios savetio;

TelAtpCtrl gAtpCtrl[NUM_OF_TEL_ATP];

utlAtParser_P aParser_p[ NUM_OF_TEL_ATP ];         /* AT parser */

extern UINT32 gServiceGroupRegistered;

#ifdef AT_PRODUCTION_CMNDS
extern void start_diag(void);

#define PROD_SERIAL_PORT "/dev/ttyS0"
extern int get_bspflag_from_kernel_cmdline(void);
extern void init_at_prod_conn(void);
extern int start_prod_at_cmd_srv(void);
#endif

pthread_mutex_t modem_thread_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t modem_thread_cond = PTHREAD_COND_INITIALIZER;
int is_modem_thread_running = 0;

int gTimeoutNum = 0;
pthread_mutex_t gTimeoutLock = PTHREAD_MUTEX_INITIALIZER;
/******************************************************************************
*   Local Function Prototypes
******************************************************************************/
int getFd(TelAtParserID sAtpIndex);
void ProcessAtChanThread(TelAtParserID sAtpIndex);
void cinetThread();
BOOL tcInitAtParser( TelAtParserID * sAtpIndex);
BOOL tcOpenExtSerialPort(int *fd, char * serial_path, int flag );
BOOL tcOpenDevice(int* fd, char * char_dev_path, int flag);
BOOL tcOpenPsuedoMasterDevice(int *fd, char* char_dev_path);


utlReturnCode_T atParserShellReplyFunction(const char *string_p, void *arg_p);
utlReturnCode_T atParserShellGetFunction(const utlAtParameterOp_T op,
					 const char                      *command_name_p,
					 const utlAtParameterValue_P2c parameter_values_p,
					 const size_t num_parameters,
					 const char                      *info_text_p,
					 unsigned int                    *xid_p,
					 void                            *arg_p);
utlReturnCode_T atParserShellSetFunction(const utlAtParameterOp_T op,
					 const char                      *command_name_p,
					 const utlAtParameterValue_P2c parameter_values_p,
					 const size_t num_parameters,
					 const char                      *info_text_p,
					 unsigned int                    *xid_p,
					 void                            *arg_p);



extern int bTerminated[NUM_OF_TEL_ATP];
extern AtciSmsFormatMode gSmsFormatMode;

/*------------------------------------------------------------------------------*/
static utlAtParameter_T A_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T D_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DIAL_STRING) };
static utlAtParameter_T E_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T H_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T I_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T L_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T M_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T O_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T P_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T Q_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T T_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T V_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T X_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T Z_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T ampC_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T ampD_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T ampF_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T ampS_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DECIMAL) };
static utlAtParameter_T ampZ_params[] = { utlDEFINE_BASIC_AT_PARAMETER(utlAT_DATA_TYPE_DIAL_STRING) };
static utlAtParameter_T eCHUPVT_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_WRITE_ONLY, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusASTO_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DIAL_STRING_AT_PARAMETER(utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };
static utlAtParameter_T plusIPR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };
static utlAtParameter_T plusICF_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					     utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };
static utlAtParameter_T plusIFC_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					     utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };
static utlAtParameter_T plusIDSR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusEXAMPLE_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCACM_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusCAMM_params[] = { utlDEFINE_STRING_AT_PARAMETER(utlAT_PARAMETER_ACCESS_READ_WRITE,	    utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusCCWE_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCHLD_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCMOD_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCGREG_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCGATT_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCGACT_params[] = {  utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusCGDATA_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCGDCONT_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusCGQMIN_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCGQREQ_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCGDSCONT_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						  utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						  utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						  utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCGEQREQ_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCGEQMIN_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

/* Michal Bukai - AT+CGTFT support */
static utlAtParameter_T plusCGTFT_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					       utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					       utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCFUN_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

/*Michal Bukai - Add a generic comm. feature configuration option in
   CI_DEV_PRIM_SET_FUNC_REQ*/
static utlAtParameter_T starCFUN_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCOPS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

/*Modified by Michal Bukai - at support for AccTchMode parameter*/
static utlAtParameter_T plusCPOL_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};


static utlAtParameter_T plusCCFC_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCCWA_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCOLP_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };
static utlAtParameter_T plusCOLR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };
static utlAtParameter_T plusCNAP_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };
static utlAtParameter_T starREJCAUSE_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };


static utlAtParameter_T plusCTZR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCTZU_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCSSN_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCUSD_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCREG_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };

static utlAtParameter_T plusCIND_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };


static utlAtParameter_T plusCLIP_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCDIP_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };
static utlAtParameter_T plusCLIR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCAOC_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };

static utlAtParameter_T plusVTS_params[] = { utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_REQUIRED),
					     utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
static utlAtParameter_T plusVTD_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCLCK_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCPWD_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCGMD_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCMGF_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCMSS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCMGS_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCMGR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCMGW_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCMGL_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };

static utlAtParameter_T plusCPIN_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCPIN2_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T starSIMDETEC_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCGSEND_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED) };

static utlAtParameter_T plusCBST_params[] = {   utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusFCLASS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCSCS_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCPBS_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusCPBR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusCPBW_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

//Added by Michal Bukai
static utlAtParameter_T plusCPBF_params[] = { utlDEFINE_STRING_AT_PARAMETER(      utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };
static utlAtParameter_T plusCSIM_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
//change by linda add path parameter
static utlAtParameter_T plusCRSM_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusMSTK_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCGSMS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCVHU_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCRLP_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCNMI_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCSCB_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL), //utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL),};//utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCSMS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusCPMS_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), //for txt mode, no para required
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCNMA_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(   utlAT_PARAMETER_ACCESS_READ_WRITE,   utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusCSCA_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusVECHO_params[] = { utlDEFINE_QSTRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

static utlAtParameter_T plusGETIP_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					       utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };
static utlAtParameter_T plusTGSINK_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusICSSink_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

static utlAtParameter_T plusATDB_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

#if 0
/* Support to output engineering mode information */
static utlAtParameter_T plusCGED_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
#endif
static utlAtParameter_T plusCCIREG_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

// support AT+CMMS
static utlAtParameter_T plusCMMS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

// support AT+VDUMP for controlling log level
static utlAtParameter_T plusVDUMP_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

// support AT+CMUT
static utlAtParameter_T plusCMUT_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

/* Michal Bukai - AT+CPUC support */
static utlAtParameter_T plusCPUC_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

/* Michal Bukai - AT+CCLK support */
//static utlAtParameter_T plusCCLK_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };
/* Michal Bukai - AT+CSTA support */
static utlAtParameter_T plusCSTA_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };
/* Michal Bukai - AT+CRC support */
static utlAtParameter_T plusCRC_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };

/* Michal Bukai - AT+CR support */
//static utlAtParameter_T plusCR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };

/* Michal Bukai - AT+CMEE support */
static utlAtParameter_T plusCMEE_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };
/* Michal Bukai - AT+CIND support: CIND will support the following (in that order) - "signal","service","message","call","roam"*/
#if 0
static utlAtParameter_T plusCIND_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};


/* Michal Bukai - AT+CMER support*/
static utlAtParameter_T plusCMER_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
#endif
/* Michal Bukai - AT+CPLS support*/
static utlAtParameter_T plusCPLS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };
/* Michal Bukai - AT+CGCMOD support*/
static utlAtParameter_T plusCGCMOD_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL) };

/* Michal Bukai - AT+DS support*/
static utlAtParameter_T plusDS_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					    utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					    utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					    utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
/*Michal Bukai - AT*CLCK support*/
static utlAtParameter_T plusMEPCLCK_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

/*Michal Bukai - AT*MEPCG support*/
static utlAtParameter_T plusMEPCG_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };

#if 0
/*Michal Bukai - AT*ULCK support*/
static utlAtParameter_T plusULCK_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_OPTIONAL),};

/*Michal Bukai - AT*UCPWD support*/
static utlAtParameter_T plusUCPWD_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					       utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE,  utlAT_PARAMETER_PRESENCE_REQUIRED),};

/*Michal Bukai - AT*UASLM support*/
static utlAtParameter_T plusUASLM_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					       utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE,   utlAT_PARAMETER_PRESENCE_OPTIONAL),};
#endif

/* Michal Bukai - AT*BAND support*/
static utlAtParameter_T plusBAND_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
/* Michal Bukai - AT*BANDIND support*/
static utlAtParameter_T plusBANDIND_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };
/* Michal Bukai - AT*READ_CAL_STATUS support*/
//static utlAtParameter_T plusCalStatus_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };
/* Michal Bukai - AT*CNMA support*/
static utlAtParameter_T plusNewMsgAck_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL), };
static utlAtParameter_T plusPOWERIND_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED), };
/*Michal Bukai - AT*AUTHReq - PAP_CHUP support (PDP Authentication)*/
static utlAtParameter_T plusAUTHReq_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER(   utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
};
static utlAtParameter_T plusCellLock_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
/* Support to output engineering mode information */
static utlAtParameter_T plusEEMOPT_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T plusERGA_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
static utlAtParameter_T plusERTCA_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					      utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
static utlAtParameter_T plusLPNWUL_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
static utlAtParameter_T plusLPLOCVR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

#ifdef AT_PRODUCTION_CMNDS
static utlAtParameter_T starMRD_CDF_params[] = { utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T starMRD_SN_params[] = { utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T starMRD_IMEI_params[] = { utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T starMRD_MEP_params[] = { utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
						 utlDEFINE_STRING_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
static utlAtParameter_T starGPSTEST_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
						 utlDEFINE_DECIMAL_AT_PARAMETER(    utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T starTDTR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T starGSMTR_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T starTGCTRL_params[] = { utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_DECIMAL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
					        utlDEFINE_HEXADECIMALL_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T starMODEMRESET_params[] = { utlDEFINE_STRING_AT_PARAMETER(     utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

#endif

#ifdef AT_LABTOOL_CMNDS
static utlAtParameter_T plusMVWFTST_params[] = { 
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_STRING_AT_PARAMETER(  utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T plusMVWFIDRW_params[] = { 
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_STRING_AT_PARAMETER(  utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T plusMVBTTST_params[] = { 
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_STRING_AT_PARAMETER(  utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T plusMVBTIDRW_params[] = { 
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_STRING_AT_PARAMETER(  utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T plusMVFMTST_params[] = { 
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_STRING_AT_PARAMETER(  utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
#endif // AT_LABTOOL_CMNDS


static utlAtParameter_T starCGSN_params[] = {
	utlDEFINE_STRING_AT_PARAMETER(  utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
static utlAtParameter_T dollarVTS_params[] = {
	utlDEFINE_STRING_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T starHTCCTO_params[] = {
	utlDEFINE_STRING_AT_PARAMETER(  utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
static utlAtParameter_T plusCMEMFULL_params[] = {
		utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
static utlAtParameter_T starEHSDPA_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
/*loopback test mode*/
static utlAtParameter_T LOOPTEST_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER(utlAT_PARAMETER_ACCESS_READ_WRITE,      utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER(utlAT_PARAMETER_ACCESS_READ_WRITE,       utlAT_PARAMETER_PRESENCE_REQUIRED),};

#ifdef AT_CUSTOMER_HTC
static utlAtParameter_T TPCN_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};
static utlAtParameter_T starFDY_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
static utlAtParameter_T FWDB_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_STRING_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_STRING_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_STRING_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_STRING_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),
	utlDEFINE_STRING_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};
#endif

/*Ophone monitor*/
static utlAtParameter_T caretDCTS_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T caretDEELS_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),};

static utlAtParameter_T caretDEVEI_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T caretDNPR_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtParameter_T caretDUSR_params[] = {
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_REQUIRED),
	utlDEFINE_DECIMAL_AT_PARAMETER( utlAT_PARAMETER_ACCESS_READ_WRITE, utlAT_PARAMETER_PRESENCE_OPTIONAL),};

static utlAtCommand_T shell_commands[] = {
	utlDEFINE_BASIC_AT_COMMAND("E",			   E_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("I",			   I_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("L",			   L_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("M",			   M_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("O",			   O_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("P",			   P_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("Q",			   Q_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("T",			   T_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("V",			   V_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("X",			   X_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("Z",			   Z_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("&C",		   ampC_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("&D",		   ampD_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("&F",		   ampF_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("&S",		   ampS_params,		atParserShellSetFunction),
	utlDEFINE_BASIC_AT_COMMAND("&Z",		   ampZ_params,		atParserShellSetFunction),

	//
	// General
	//
	// Built-in ACTION COMMAND
	utlDEFINE_EXACTION_AT_COMMAND("+CGMI",		   NULL,		"+CGMI",																																														     atParserShellGetFunction),
	utlDEFINE_EXACTION_AT_COMMAND("+CGMM",		   NULL,		"+CGMM",																																														     atParserShellGetFunction),
	utlDEFINE_EXACTION_AT_COMMAND("+CGMR",		   NULL,		"+CGMR",																																														     atParserShellGetFunction),
	utlDEFINE_EXACTION_AT_COMMAND("+CGSN",		   NULL,		"+CGSN",																																														     ciCGSN),
	utlDEFINE_EXTENDED_AT_COMMAND("+CSCS",		   plusCSCS_params,	"+CSCS: (\"IRA\",\"UCS2\",\"HEX\")",																																													     ciCSCS,			    ciCSCS),
	utlDEFINE_EXACTION_AT_COMMAND("+CIMI",		   NULL,		"+CIMI: ",																																														     ciGetImsi),

	utlDEFINE_EXTENDED_AT_COMMAND("+ASTO",		   plusASTO_params,	"+ASTO: (0-" utlStringize(utlAT_MAX_STORED_DIAL_STRINGS) "),(" utlStringize(utlAT_MAX_STORED_DIAL_STRING_LENGTH) ")",																																	     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+GMI",		   NULL,		"+GMI",																																															     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+GMM",		   NULL,		"+GMM",																																															     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+GMR",		   NULL,		"+GMR",																																															     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXACTION_AT_COMMAND("+GSN",		   NULL,		"+GSN",																																															     ciCGSN),
	utlDEFINE_EXTENDED_AT_COMMAND("+GOI",		   NULL,		"+GOI",																																															     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+GCAP",		   NULL,		"+GCAP",																																														     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+GCI",		   NULL,		"+GCI",																																															     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+IPR",		   plusIPR_params,	"+IPR: (0,1200,9600),(0,50,75,110,134,150,200,300,600,1200,1800,2400,4800,7200,9600,14400,19200,28800,38400,57600,76800,115200,230400)",																														     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+ICF",		   plusICF_params,	"+ICF: (0-6),(0-3)",																																													     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+IFC",		   plusIFC_params,	"+IFC: (0-3),(0-2)",																																													     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXTENDED_AT_COMMAND("+IDSR",		   plusIDSR_params,	"+IDSR: (0-2)",																																														     atParserShellGetFunction,	    atParserShellSetFunction),

	utlDEFINE_EXTENDED_AT_COMMAND("+EXAMPLE",	   plusEXAMPLE_params,	"+EXAMPLE: (0-9)",																																													     atParserShellGetFunction,	    atParserShellSetFunction),
	utlDEFINE_EXACTION_AT_COMMAND("^HVER",	NULL, "^HVER", ciGetHVER),

	/*For "AT" command  */
	utlDEFINE_BASIC_AT_COMMAND(" ",			   NULL,		ciAT),

	//
	// Call Control
	//
	utlDEFINE_BASIC_AT_COMMAND("A",			   A_params,		ciAnswerCall),
	utlDEFINE_BASIC_AT_COMMAND("D",			   D_params,		ciMakeCall),
	utlDEFINE_BASIC_AT_COMMAND("H",			   H_params,		ciReleaseCall),
	utlDEFINE_EXTENDED_AT_COMMAND("+CMOD",		   plusCMOD_params,	"+CMOD: (0-3)",																																														     ciCallModeReq,		    ciCallModeReq),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CBST",	   plusCBST_params,	ciSelectBST,																																														     ciSelectBST,		    ciSelectBST),
	utlDEFINE_EXTENDED_AT_COMMAND("+CVHU",		   plusCVHU_params,	"+CVHU: (0-2)",																																														     ciCVHU,			    ciCVHU),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CRLP",	   plusCRLP_params,	ciSelRLP,																																														     ciSelRLP,			    ciSelRLP),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CMUT",	   plusCMUT_params,	ciMute,																																															     ciMute,			    ciMute),
	utlDEFINE_EXTENDED_AT_COMMAND("+ECHUPVT",	   eCHUPVT_params, "+ECHUPVT: (0-127)", ciHangupVT,ciHangupVT),
		

	//
	// Network Service Related
	//
	utlDEFINE_EXTENDED_AT_COMMAND("+CREG",		   plusCREG_params,	"+CREG: (0-2)",																																														     ciRegStatus,		    ciRegStatus),
	utlDEFINE_EXTENDED_AT_COMMAND("+CIND",		   plusCIND_params,	"+CIND: (\"service\",(0-1))",   																																											ciNwModeInd,		    ciNwModeInd),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+COPS",	   plusCOPS_params,	ciOperSel,																																														     ciOperSel,			    ciOperSel),
	utlDEFINE_EXTENDED_AT_COMMAND("+CPOL",		   plusCPOL_params,	"+CPOL: (1-254),(0-2),<oper string>,<GSM_AcT>,<GSM_Compact_AcT>,<UTRAN_AcT>",																																											     ciPrefOper,		    ciPrefOper),

	utlDEFINE_EXTENDED_AT_COMMAND("+CLCK",		   plusCLCK_params,	"+CLCK: (\"CS\", \"PS\", \"PF\", \"SC\", \"AO\", \"OI\", \"OX\", \"AI\", \"IR\", \"NT\", \"NM\", \"NS\", \"NA\", \"AB\", \"AG\", \"AC\", \"FD\", \"PN\", \"PU\", \"PP\", \"PC\" )",																									     ciCLCK,			    ciCLCK),

	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CPWD",	   plusCPWD_params,	ciPassword,																																														     ciPassword,			    ciPassword),

	utlDEFINE_EXTENDED_AT_COMMAND("+CLIP",		   plusCLIP_params,	"+CLIP: (0-1)",																																														     ciCLIP,			    ciCLIP),
	utlDEFINE_EXTENDED_AT_COMMAND("+CLIR",		   plusCLIR_params,	"+CLIR: (0-2)",																																														     ciCallIDRes,		    ciCallIDRes),
	utlDEFINE_EXTENDED_AT_COMMAND("+COLP",		   plusCOLP_params,	"+COLP: (0-1)",																																														     ciCOLP,			    ciCOLP),
	utlDEFINE_EXTENDED_AT_COMMAND("+COLR",		   plusCOLR_params,	"+COLR? ",																																														     ciCOLR,			    ciCOLR),
	utlDEFINE_EXTENDED_AT_COMMAND("+CNAP",		   plusCNAP_params,	"+CNAP: (0-1)",																																														     ciCNAP,			    ciCNAP),

	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CCFC",	   plusCCFC_params,	ciCallForward,																																														     ciCallForward,		    ciCallForward),

	utlDEFINE_EXTENDED_AT_COMMAND("+CCWA",		   plusCCWA_params,	"+CCWA: (0-1)",																																												     ciCallWaiting,		    ciCallWaiting),
	utlDEFINE_EXTENDED_AT_COMMAND("+CHLD",		   plusCHLD_params,	"+CHLD:(0, 1, 1x, 2, 2x, 3, 4)",																																											     ciHoldCall,		    ciHoldCall),
	utlDEFINE_EXTENDED_AT_COMMAND("+CUSD",		   plusCUSD_params,	"+CUSD: (0-2)",																																														     ciCUSD,			    ciCUSD),
	utlDEFINE_EXTENDED_AT_COMMAND("+CAOC",		   plusCAOC_params,	"+CAOC: (0-2)",																																														     ciAdviceOfCharge,		    ciAdviceOfCharge),
	utlDEFINE_EXTENDED_AT_COMMAND("+VTS",		   plusVTS_params,	"+VTS: <DTMF>, (300-600)",																																												     ciSendDTMF,		    ciSendDTMF),
	utlDEFINE_EXTENDED_AT_COMMAND("+VTD",          plusVTD_params,  "+VTD: (300-600)",																																															 ciVTD,                 ciVTD),
	utlDEFINE_EXTENDED_AT_COMMAND("+CSSN",		   plusCSSN_params,	"+CSSN: (0-1), (0-1)",																																													     ciCSSN,			    ciCSSN),
	utlDEFINE_EXACTION_AT_COMMAND("+CLCC",		   NULL,		"+CLCC:",																																														     ciCallList),
	utlDEFINE_EXACTION_AT_COMMAND("+CEER",		   NULL,		"+CEER:",																																														     ciErrorReport),
	utlDEFINE_EXACTION_AT_COMMAND("+PEER",		   NULL,		"+PEER:",																																														     ciPdpErrorReport),
	utlDEFINE_EXACTION_AT_COMMAND("+CSQ",		   NULL,		"+CSQ:(0-31),(0-7)",																																													     ciSignalQuality),
	utlDEFINE_EXTENDED_AT_COMMAND("*REJCAUSE",		   starREJCAUSE_params, "*REJCAUSE: (0-2)", 																																									cistarREJCAUSE,			cistarREJCAUSE),

	//
	// Mobile Control and Status
	//
	utlDEFINE_EXACTION_AT_COMMAND("+CPAS",		   NULL,		"+CPAS: (0,2,3,4)",																																													     ciDevStatus),
	utlDEFINE_EXTENDED_AT_COMMAND("+CFUN",		   plusCFUN_params,	"+CFUN: (0,1,4,5),(0-1)",																																													     ciFuncSet,			    ciFuncSet),
	utlDEFINE_EXTENDED_AT_COMMAND("*CFUN",		   starCFUN_params,	"*CFUN: (0,1,4,5,6,9),(0-1),(0,1),(0-63)",																																										     ciFuncCpConfig,		    ciFuncCpConfig),
	utlDEFINE_EXTENDED_AT_COMMAND("+CPIN",		   plusCPIN_params,	"+CPIN: ",																																														     ciEnterPin,		    ciEnterPin),
	utlDEFINE_EXTENDED_AT_COMMAND("+CPIN2",		   plusCPIN2_params,	"+CPIN2: ",																																														     ciEnterPin2,		    ciEnterPin2),
	utlDEFINE_EXTENDED_AT_COMMAND("+EPIN",		   NULL,		"+EPIN: (0-3),(0-3),(0-10),(0-10)",																																											     ciGetPinRetryTimes,	    ciGetPinRetryTimes),
	utlDEFINE_EXTENDED_AT_COMMAND("*SIMDETEC",		   starSIMDETEC_params, "*SIMDETEC: (1,2)",																																															 ciDetectSIM,			ciDetectSIM),

	utlDEFINE_EXTENDED_AT_COMMAND("+CTZR",		   plusCTZR_params,	"+CTZR:",																																														     ciCTZR,			    ciCTZR),
	utlDEFINE_EXTENDED_AT_COMMAND("+CTZU",		   plusCTZU_params,	"+CTZU:",																																														     ciCTZU,			    ciCTZU),
	utlDEFINE_EXTENDED_AT_COMMAND("*CTZR",		   plusCTZR_params, "*CTZR:",																																															 cistarCTZR,				cistarCTZR),

	// PB
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CPBS",	   plusCPBS_params,	ciSelectPBStorage,																																													     ciSelectPBStorage,		    ciSelectPBStorage),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CPBR",	   plusCPBR_params,	ciReadPB,																																														     ciReadPB,			    ciReadPB),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CPBW",	   plusCPBW_params,	ciWritePB,																																														     ciWritePB,			    ciWritePB),
	/*utlDEFINE_EXACTION_AT_COMMAND("+CNUM",		   NULL,		"+CNUM: ",																																														     ciGetSubscriber),*/
	//Added by Michal Bukai
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CPBF",	   plusCPBF_params,	ciFindPBEntries,																																													     ciFindPBEntries,		    ciFindPBEntries),

	// SIM
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CSIM",	   plusCSIM_params,	ciGenericAccessSim,																																													     ciGenericAccessSim,	    ciGenericAccessSim),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CRSM",	   plusCRSM_params,	ciRestrictedAccessSIM,																																													     ciRestrictedAccessSIM,	    ciRestrictedAccessSIM),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+MSTK",	   plusMSTK_params,	ciSTK,																																															     ciSTK,			    ciSTK),
	utlDEFINE_EXTENDED_AT_COMMAND("*EUICC", NULL,           "*EUICC:",	ciEUICC,																																															 ciEUICC),

	// Call Meter
	utlDEFINE_EXTENDED_AT_COMMAND("+CACM",		   plusCACM_params,	"+CACM:(0 - FFFFFF)",																																													     ciAccumReq,		    ciAccumReq),
	utlDEFINE_EXTENDED_AT_COMMAND("+CAMM",		   plusCAMM_params,	"+CAMM:(000000 - FFFFFF)",																																												     ciAccumMaxReq,		    ciAccumMaxReq),
	utlDEFINE_EXTENDED_AT_COMMAND("+CCWE",		   plusCCWE_params, "+CCWE:(0,1)",																																																 ciCCWE,				ciCCWE),


	//
	// Packet Domain
	//
	utlDEFINE_EXTENDED_AT_COMMAND("+CGREG",		   plusCGREG_params,	"+CGREG: (0,2)",																																													     ciPSRegStatus,		    ciPSRegStatus),
	utlDEFINE_EXTENDED_AT_COMMAND("+CGATT",		   plusCGATT_params,	"+CGATT: (0,1)",																																													     ciPSAttach,		    ciPSAttach),
	utlDEFINE_EXTENDED_AT_COMMAND("+CGACT",		   plusCGACT_params,	"+CGACT: (0,1), ( 1)",																																													     ciPDPActivate,		    ciPDPActivate),
	utlDEFINE_EXTENDED_AT_COMMAND("+CGDATA",	   plusCGDATA_params,	"+CGDATA: (\"PPP\"), ( 1- " utlStringize(CI_PS_MAX_PDP_CTX_NUM) ")",																																							     NULL,			    ciEnterData),
	utlDEFINE_EXTENDED_AT_COMMAND("+CGDCONT",	   plusCGDCONT_params,	"+CGDCONT:(1-8),\"IP\", , ,(0,2),(0,1)\r\n+CGDCONT:(1-8),\"PPP\", , ,(0,2),(0,1)\r\n+CGDCONT:(1-8),\"IPV6\", , ,(0,2),(0,1)",                                                                                        																					     ciSetContext,		    ciSetContext),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CGDSCONT", plusCGDSCONT_params, ciSetSContext,																																														     ciSetSContext,		    ciSetSContext),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CGQMIN",   plusCGQMIN_params,	ciSetMinQOS,																																														     ciSetMinQOS,		    ciSetMinQOS),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CGQREQ",   plusCGQREQ_params,	ciSetReqQOS,																																														     ciSetReqQOS,		    ciSetReqQOS),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CGEQREQ",  plusCGEQREQ_params,	ciSet3GQOS,																																														     ciSet3GQOS,		    ciSet3GQOS),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CGEQMIN",  plusCGEQMIN_params,	ciSet3GminQOS,																																														     ciSet3GminQOS,		    ciSet3GminQOS),
	utlDEFINE_EXTENDED_AT_COMMAND("+GETIP",		   plusGETIP_params,	NULL,																																															     ciReturnIp,		    ciReturnIp),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*TGSINK",   plusTGSINK_params,	ciGpTGSINK,																																														     ciGpTGSINK,		    ciGpTGSINK),

	utlDEFINE_EXTENDED_AT_COMMAND("+CGSEND",	   plusCGSEND_params,	"+CGSEND: (0-10000)",																																													     ciCGSend,			    ciCGSend),

	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*ICSSINK",  plusICSSink_params,	ciCsDataSink,																																														     ciCsDataSink,		    ciCsDataSink),
	utlDEFINE_EXTENDED_AT_COMMAND("*AUTHReq", plusAUTHReq_params,"*AUTHReq: <cid>,<type>(0-None;1-PAP;2-CHAP),<UserName>,<Password>", ciAUTHReq, ciAUTHReq),//Michal Bukai - PAP_CHAP support (PDP Authentication)
	// Commands from TIA IS 101
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+FCLASS",   plusFCLASS_params,	ciFaxClass,																																														     ciFaxClass,		    ciFaxClass),


	//
	// SMS
	//
	utlDEFINE_EXTENDED_AT_COMMAND("+CMGF",		   plusCMGF_params,	"+CMGF: (0,1)",																																														     ciMsgFormat,		    ciMsgFormat),
	utlDEFINE_EXTENDED_AT_COMMAND("+CMSS",		   plusCMSS_params,	"+CMSS: ",																																														     ciSendStoredMsg,		    ciSendStoredMsg),
	utlDEFINE_EXTENDED_AT_COMMAND("+CMGS",		   plusCMGS_params,	"+CMGS: ",																																														     ciSendMsg,			    ciSendMsg),
	utlDEFINE_EXTENDED_AT_COMMAND("+CMGR",		   plusCMGR_params,	"+CMGR: ",																																														     ciReadMsg,			    ciReadMsg),
	utlDEFINE_EXTENDED_AT_COMMAND("+CMGW",		   plusCMGW_params,	"+CMGW: ",																																														     ciStoreMsg,		    ciStoreMsg),
	utlDEFINE_EXTENDED_AT_COMMAND("+CSCA",		   plusCSCA_params,	"+CSCA:",																																														     ciSrvCenterAddr,		    ciSrvCenterAddr),
	utlDEFINE_EXTENDED_AT_COMMAND("+CSCB",		   plusCSCB_params,	"+CSCB:(0,1)",																																														     ciSelectCbMsgType,		    ciSelectCbMsgType),
	utlDEFINE_EXTENDED_AT_COMMAND("+CNMI",		   plusCNMI_params,	"+CNMI: (0-3),(0-3),(0-3),(0-1),(0-1)",																																											     ciNewMsgInd,		    ciNewMsgInd),
	utlDEFINE_EXTENDED_AT_COMMAND("+CGSMS",		   plusCGSMS_params,	"+CGSMS: (0-3)",																																													     ciSetMoService,		    ciSetMoService),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CMMS",	   plusCMMS_params,	ciSetMoreMsgToSend,																																													     ciSetMoreMsgToSend,	    ciSetMoreMsgToSend),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CMGD",	   plusCGMD_params,	ciDeleteMsg,																																														     ciDeleteMsg,		    ciDeleteMsg),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CMGL",	   plusCMGL_params,	ciListMsg,																																														     ciListMsg,		    ciListMsg),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CSMS",	   plusCSMS_params,	ciSelectSmsSrv,																																														     ciSelectSmsSrv,		    ciSelectSmsSrv),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CPMS",	   plusCPMS_params,	ciPrefStorage,																																														     ciPrefStorage,		    ciPrefStorage),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CNMA",	   plusCNMA_params,	ciNewMsgAck,																																														     ciNewMsgAck,		    ciNewMsgAck),

	// Non 3GPP ACTION COMMAND
	utlDEFINE_EXACTION_AT_COMMAND("+CGCI",		   NULL,		"+CGCI",																																														     atParserShellGetFunction),
	utlDEFINE_EXACTION_AT_COMMAND("+CGOI",		   NULL,		"+CGOI",																																														     atParserShellGetFunction),

	utlDEFINE_EXTENDED_AT_COMMAND("+VDUMP",		   plusVDUMP_params,	"+VDUMP: (0-8)",																																													     vDump,			    vDump),
	utlDEFINE_EXTENDED_AT_COMMAND("+VPDUS",		   NULL,		"+VPDUS:",																																														     vPDUS,			    NULL),
	utlDEFINE_EXTENDED_AT_COMMAND("+VHDL",		   NULL,		"+VHDL: (Show Handle)",																																													     vHDL,			    vHDL),
	utlDEFINE_EXTENDED_AT_COMMAND("+VECHO",		   plusVECHO_params,	"+VECHO: ",																																														     vECHO,			    vECHO),

	// debug atcommand for +cgsend *tgsink.
	utlDEFINE_EXTENDED_AT_COMMAND("+ATDB",		   plusATDB_params,	"+ATDB: <fun:1-+CGSEND, 2-*TGSINK>, <value>",																																										     atdb,			    atdb),

	// Enter the engineering mode
	//utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CGED",	   plusCGED_params,	ciCGED,																																															     ciCGED,			    ciCGED),

	// ADDED BY Danfeng to deregister from CCI
	utlDEFINE_EXTENDED_AT_COMMAND("*CCIREG",	   plusCCIREG_params,	"*CIREG: 0",																																													     cciReg,			    cciReg),

	/*Start -  Michal Bukai */
	//utlDEFINE_EXTENDED_AT_COMMAND("+CMUT",  plusCMUT_params, "+CMUT: (0,1)", ciCMUT, ciCMUT),
	utlDEFINE_EXTENDED_AT_COMMAND("+CPUC",  plusCPUC_params, "+CPUC: <currency>, <ppu>, <PIN2>", ciCPUC, ciCPUC),
	//utlDEFINE_EXTENDED_AT_COMMAND("+CCLK",  plusCCLK_params, "+CCLK: <time: mmddhhmmyyyy>", ciCCLK, ciCCLK),
	utlDEFINE_EXACTION_AT_COMMAND("+CHUP",		   NULL,		"+CHUP: ",																																														     ciCHUP),
	utlDEFINE_EXTENDED_AT_COMMAND("+CSTA",		   plusCSTA_params,	"+CSTA: (129,145,161,177)",																																											     ciCSTA,			    ciCSTA),
	utlDEFINE_EXTENDED_AT_COMMAND("+CRC",		   plusCRC_params,	"+CRC: (0,1)",																																														     ciCRC,			    ciCRC),
	//utlDEFINE_EXTENDED_AT_COMMAND("+CR",   plusCR_params,     "+CR: (0,1)", ciCR, ciCR),
	utlDEFINE_EXTENDED_AT_COMMAND("+CMEE", plusCMEE_params,  "+CMEE: (0-2)", ciCMEE, ciCMEE),
	//utlDEFINE_EXTENDED_AT_COMMAND("+CIND",  plusCIND_params, "+CIND: (\"signal\",(0-5)),(\"service\",(0-1)),(\"message\",(0-1)),(\"call\",(0-1)),(\"roam\",(0-1))", ciCIND, ciCIND),
	//utlDEFINE_EXTENDED_AT_COMMAND("+CMER",  plusCMER_params, "+CMER: (0), (0), (0), (0-2), (0)", ciCMER, ciCMER),
	//utlDEFINE_EXACTION_AT_COMMAND("+CLAC", NULL, "+CLAC: ", ciCLAC),/* APSE code for AT+CLAC command*/
	//utlDEFINE_EXACTION_AT_COMMAND("+CEER", NULL, "+CEER: ", ciCEER),
	utlDEFINE_EXTENDED_AT_COMMAND("+CDIP",		   plusCDIP_params,	"+CDIP: (0-1)",																																														     ciCDIP,			    ciCDIP),
	utlDEFINE_EXTENDED_AT_COMMAND("+CPLS",		   plusCPLS_params,	"+CPLS: (0-2)",																																														     ciCPLS,			    ciCPLS),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CGCMOD",   plusCGCMOD_params,	ciModifyContext,																																													     ciModifyContext,		    ciModifyContext),
	utlDEFINE_EXACTION_AT_COMMAND("+CNUM", NULL, "+CNUM: ", ciCNUM),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+DS",	   plusDS_params,	ciDS,																																															     ciDS,			    ciDS),
	utlDEFINE_EXTENDED_AT_COMMAND("+CGTFT",		   plusCGTFT_params,	"+CGTFT: <cid>, <packet filter identifier>(1-8), <evaluation precedence index>(0-255), <source address and subnet mask>, <protocol number (ipv4) / next header (ipv6)>, <destination port range>, <source port range>, <ipsec security parameter index (spi)>(00000000-FFFFFFFF), <type of service (tos) (ipv4) and mask / traffic class (ipv6) and mask>, <flow label (ipv6)>(00000-FFFFF)",ciCGTFT,			    ciCGTFT),
	//utlDEFINE_EXACTION_AT_COMMAND("*CPRST", NULL, "*CPRST: ", ciSilentReset),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*BAND",	   plusBAND_params,	ciBAND,																																															     ciBAND,			    ciBAND),
	utlDEFINE_EXTENDED_AT_COMMAND("*BANDIND",	   plusBANDIND_params,	"*BANDIND: (0,1)",																																													     ciBANDIND,			    ciBANDIND),
	/*MEP and UDP property AT commands*/
	//utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+CLCK",  plusCLCK_params, ciCLCK, ciCLCK, ciCLCK),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*CLCK",  plusMEPCLCK_params, ciMEPCLCK, ciMEPCLCK, ciMEPCLCK),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*MEPCG",  plusMEPCG_params, ciMEPCG, ciMEPCG, ciMEPCG),
	//utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*ULCK",  plusULCK_params, ciULCK, ciULCK, ciULCK),
	//utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*UCPWD",  plusUCPWD_params, ciUCPWD, ciUCPWD, ciUCPWD),
	//utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*UASLM",  plusUASLM_params, ciUASLM, ciUASLM, ciUASLM),
	utlDEFINE_EXTENDED_EXACTION_AT_COMMAND("*ENVSIM",  NULL,		"*ENVSIM:",																																														     ciEnVsim,			    ciEnVsim),
	//utlDEFINE_EXACTION_AT_COMMAND("*RST", NULL, "*RST: ", ciRST),
	//utlDEFINE_EXTENDED_AT_COMMAND("*CalStatus", plusCalStatus_params,"*READ_CAL_STATUS:(0,1)", ciCalStatus, ciCalStatus),
	utlDEFINE_EXTENDED_AT_COMMAND("*CNMA", plusNewMsgAck_params,"*CNMA:(0-2)", ciNewMsgAck, ciNewMsgAck),
	//utlDEFINE_EXACTION_AT_COMMAND("*RSTMEMFULL",	   NULL,		"*RSTMEMFULL: ",																																													     ciRSTMemFull),
	/*End -  Michal Bukai */
	utlDEFINE_EXTENDED_AT_COMMAND("*POWERIND",	   plusPOWERIND_params,	"*POWERIND: (0,1)",																																													     ciPOWERIND,			    ciPOWERIND),
	utlDEFINE_EXACTION_AT_COMMAND("*FASTDORM", 	NULL, 		"*FASTDORM: ",																																														ciFastDormancy),
	// Enter the engineering mode
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+EEMOPT",	   plusEEMOPT_params,	ciEEMOPT,																																															     ciEEMOPT,			    ciEEMOPT),
	utlDEFINE_EXTENDED_AT_COMMAND("+EEMGINFO",  NULL,		"+EEMGINFO:", 																																														 ciEEMGINFO,				ciEEMGINFO),

	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+ERGA",	   plusERGA_params,	ciRunGSMAlgorithm,																																															     ciRunGSMAlgorithm,			    ciRunGSMAlgorithm),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+ERTCA",	   plusERTCA_params,	ciRunTContextAuth,																																															     ciRunTContextAuth,			    ciRunTContextAuth),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+LPNWUL",	   plusLPNWUL_params,	ciLPNWUL,																																															     ciLPNWUL,			    ciLPNWUL),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+LPLOCVR",	   plusLPLOCVR_params,	ciLPLOCVR,																																																 ciLPLOCVR,				ciLPLOCVR),
	utlDEFINE_EXTENDED_AT_COMMAND("*CellLock",  plusCellLock_params, "*CellLock: <mode>,<arfcn>,<scrambling_code>", ciCellLock,ciCellLock),//Michal Bukai - AT*CellLock
#ifdef AT_PRODUCTION_CMNDS
	// Add in here Production Mode commands only
	utlDEFINE_EXACTION_AT_COMMAND("*SYSSLEEP", NULL, "*SYSSLEEP: ", SysSleep),
	utlDEFINE_EXTENDED_AT_COMMAND("*MRD_CDF", starMRD_CDF_params, "*MRD_CDF=<a>,<f>[,<v>,<d>]", AtMrdCdf, AtMrdCdf),  // store or delete a communication data file (CDF) to the MRD
	utlDEFINE_EXTENDED_AT_COMMAND("*MRD_SN", starMRD_SN_params, "*MRD_SN=<a>,[<v>,<d>,<s>]", AtMrdSn, AtMrdSn),  // write, read or  delete the serial number to/from the MRD
	utlDEFINE_EXTENDED_AT_COMMAND("*MRD_IMEI", starMRD_IMEI_params, "*MRD_IMEI=<a>[,<v>,<d>,<s>]", AtMrdImei, AtMrdImei), // write, read or delete the IMEI number.
	utlDEFINE_EXTENDED_AT_COMMAND("*MRD_MEP", starMRD_MEP_params, "*MRD_MEP=<a>[,<v>,<d>,<s1>,<s2>,<s3>,<s4>,<s5>,<s6>,<s7>] ", AtMrdMep, AtMrdMep), // write, read or delete the MEP data.

	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*GPSTEST", starGPSTEST_params, AtGpsTest, AtGpsTest, AtGpsTest),

	utlDEFINE_EXTENDED_AT_COMMAND("*TDTR", starTDTR_params, "*TDTR=<op>[,<gain>,<freq>]", ciTDTR, ciTDTR), /* request to set Tx/Rx on TD */
	utlDEFINE_EXTENDED_AT_COMMAND("*GSMTR", starGSMTR_params, "*GSMTR=<op>[,<band>,<arfcn>,<afcDac>[,<txRampScale>,<rxGainCode>]]", ciGSMTR, ciGSMTR), /* request to set Tx/Rx on GSM */
	utlDEFINE_EXTENDED_AT_COMMAND("*TGCTRL", starTGCTRL_params, "*TGCTRL=<nw>,<op>,<value>[,<addr>]", ciTGCTRL, ciTGCTRL),

	utlDEFINE_EXACTION_AT_COMMAND("*RFC", NULL, "*RFC", DiagCommand),
#endif

#ifdef AT_LABTOOL_CMNDS
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+MVWFTST",  plusMVWFTST_params,  ciMVWFTST,  ciMVWFTST,  ciMVWFTST),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+MVWFIDRW", plusMVWFIDRW_params, ciMVWFIDRW, ciMVWFIDRW, ciMVWFIDRW),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+MVBTTST",  plusMVBTTST_params,  ciMVBTTST,  ciMVBTTST,  ciMVBTTST),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+MVBTIDRW", plusMVBTIDRW_params, ciMVBTIDRW, ciMVBTIDRW, ciMVBTIDRW),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("+MVFMTST",  plusMVFMTST_params,  ciMVFMTST,  ciMVFMTST,  ciMVFMTST),
#endif // AT_LABTOOL_CMNDS

	utlDEFINE_EXACTION_AT_COMMAND("+OFF", NULL, "+OFF", ciOFF),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*CGSN",  starCGSN_params,  ciStarCGSN,  ciStarCGSN,  ciStarCGSN),
	utlDEFINE_EXTENDED_VSYNTAX_AT_COMMAND("*MODEMTYPE",  NULL,  ciStarMODEMTYPE,  ciStarMODEMTYPE,  ciStarMODEMTYPE),
	utlDEFINE_EXTENDED_AT_COMMAND("$VTS",              dollarVTS_params,    "$VTS: <DTMF>, (0,1)",      ciSendLongDTMF,                 ciSendLongDTMF),
	utlDEFINE_EXTENDED_AT_COMMAND("*MODEMRESET", starMODEMRESET_params, "*MODEMRESET[=<resetInfo>]",  ciStarMODEMRESET,  ciStarMODEMRESET),
	utlDEFINE_EXTENDED_AT_COMMAND("*HTCCTO", starHTCCTO_params, "*HTCCTO: <AT command>, (1-7), <timeout>", ciStarHTCCTO, ciStarHTCCTO),
	utlDEFINE_EXTENDED_AT_COMMAND("+CMEMFULL", plusCMEMFULL_params, "+CMEMFULL: (0,1)", ciCMEMFULL, ciCMEMFULL),
#ifdef TD_SUPPORT
	utlDEFINE_EXTENDED_AT_COMMAND("*EHSDPA", starEHSDPA_params, "*EHSDPA: (0-2),(1-11,13-14),(6),(0)", ciStarEHSDPA, ciStarEHSDPA),
#else
	utlDEFINE_EXTENDED_AT_COMMAND("*EHSDPA", starEHSDPA_params, "*EHSDPA: (0-2),(1-6),(0),(0)", ciStarEHSDPA, ciStarEHSDPA),
#endif
	/*loopback test*/
	utlDEFINE_EXTENDED_AT_COMMAND("+LOOPTEST", LOOPTEST_params, "+LOOPTEST: (0-1),(0-2)", ciLOOPTEST, ciLOOPTEST),
	//
	// Ohone monitor
	//
	utlDEFINE_EXTENDED_AT_COMMAND("^DCTS", caretDCTS_params, "^DCTS: (0),(16,96)", ciDCTS, ciDCTS), /* mode switch of the MT between normal mode and test mode */
	utlDEFINE_EXTENDED_AT_COMMAND("^DEELS", caretDEELS_params, "^DEELS: (0,1)", ciDEELS, ciDEELS), /* controls the presentation of the protocol status unsolicited result code  ^DEELSI: <status>*/
	utlDEFINE_EXTENDED_AT_COMMAND("^DEVEI", caretDEVEI_params, "^DEVEI: (0,1)", ciDEVEI, ciDEVEI), /* enable/disable the unsolicited result code "^DEVEI: <timestamp>,<operation type>,<id>" during the MMI cell test mode*/
	utlDEFINE_EXTENDED_AT_COMMAND("^DNPR", caretDNPR_params, "^DNPR: (0,1),(0,65535)", ciDNPR, ciDNPR), /* enable/disable the unsolicited result code about wireless parameter to the TE*/
	utlDEFINE_EXTENDED_AT_COMMAND("^DUSR", caretDUSR_params, "^DNPR: (0,1),(0,1)", ciDUSR, ciDUSR), /* enables or disables the presentation of unsolicited result response ^DUSRI: <signaling> when receiving the air interface signal from lower layer. */

#ifdef AT_CUSTOMER_HTC
	utlDEFINE_EXTENDED_AT_COMMAND("+TPCN", TPCN_params, "+TPCN: (0-4)", ciTPCN, ciTPCN),
	utlDEFINE_EXTENDED_AT_COMMAND("*FDY", starFDY_params, "*FDY:(0,1),(1-65535)", ciStarFDY, ciStarFDY),
	utlDEFINE_EXTENDED_AT_COMMAND("+FWDB", FWDB_params, "FWDB:1,(1-5),<index>,<phone number>...", ciFirewallDB, ciFirewallDB),
#endif
	utlDEFINE_EXACTION_AT_COMMAND("^SYSINFO",  NULL,	"^SYSINFO:", ciSysInfo),
};
const utlAtCommand_T * const pshell_commands = shell_commands;
const unsigned int shell_commands_num = utlNumberOf(shell_commands);

ATCMD_TimeOut atcmd_timeout_table[utlNumberOf(shell_commands)]={
										{"+CCFC",	{155, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CCWA",	{155, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CFUN",	{15, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CGDATA",	{155, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CHLD",	{12, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CLIR",	{utlAT_AWAIT_ASYNC_TIMEOUT_TIME, 155, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CMGD",	{40, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, 40}},
										{"+CMGL",	{40, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CMGS",	{50, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CMGW",	{10, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+COPN",	{100, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+COPS",	{60, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, 150}},
										{"+CPBW",	{15, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CPIN",	{18, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CPIN2",	{18, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CPWD",	{20, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+CRSM",	{20, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"*BAND",	{20, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
										{"+OFF",	{15, utlAT_AWAIT_ASYNC_TIMEOUT_TIME, utlAT_AWAIT_ASYNC_TIMEOUT_TIME}},
};
pthread_mutex_t gTimeoutTableLock = PTHREAD_MUTEX_INITIALIZER;


/*------------------------------------------------------------------------------*/


int getFd(TelAtParserID sAtpIndex)
{
	F_ENTER();
	if (sAtpIndex < NUM_OF_TEL_ATP)
		return gAtpCtrl[sAtpIndex].iFd;
	else
		return 0;  //return to stdout

	F_LEAVE();
}

int notifyAtParser(TelAtParserID sAtpIndex, unsigned char cmd)
{
	int ret = -1;
	if (sAtpIndex < NUM_OF_TEL_ATP && gAtpCtrl[sAtpIndex].iNotifyWriteEnd > 0
		&& cmd < TEL_ATP_CMD_NUM)
	{
		do
		{
			ret = write(gAtpCtrl[sAtpIndex].iNotifyWriteEnd, &cmd, sizeof(cmd));
		}while (ret < 0 && errno == EINTR);
		if(ret > 0)
			DBGMSG("%s: send message %d to parser_p %d\n", __FUNCTION__, cmd, sAtpIndex);
	}
	return ret;
}

int triggerAtParser(TelAtParserID sAtpIndex)
{
	return notifyAtParser(sAtpIndex, TEL_ATP_CMD_TRIGGER_PARSER);
}

/*******************************************************************
*  FUNCTION: atChanThread()
*
*  PARAMETERS:     None
*
*  DESCRIPTION:    This function is used to handle the AT Command Channel
*
*  RETURNS:
*
*******************************************************************/
void ProcessAtChanThread(TelAtParserID sAtpIndex)
{

	int received = -1, fd, i = 0;
	char buffer[TEL_AT_CMDSTR_MAX_LEN];
	int rc;
	int SmsMsgLen = 0;
	CHAR SmsMsgData[ ATCI_MAX_SMS_TDPU_SIZE * 2 ];
	fd_set fds;
	int nfds = -1;
	unsigned char ctrl_msg = 0xff;
	int ret = -1;

	fd = getFd(sAtpIndex);
	/* Run until Terminated */

	if(sAtpIndex == TEL_MODEM_AT_CMD_ATP)
	{
		pthread_mutex_lock(&modem_thread_mutex);
		is_modem_thread_running = 1;
		pthread_mutex_unlock(&modem_thread_mutex);
		DBGMSG("#####start modem thread !!!!");
	}

	// make sure notify pipe is empty before entering loop
	do
	{
		ret = read(gAtpCtrl[sAtpIndex].iNotifyReadEnd, &ctrl_msg, sizeof(ctrl_msg));
	}while ((ret > 0) || (ret < 0 && errno == EINTR));

	while (!bTerminated [sAtpIndex])
	{
		received = -1;
		nfds = -1;

		/*
		 * Receive message
		 */
		DBGMSG("%s reading handle: %d, parser_p: %d.\n",  __FUNCTION__, fd, sAtpIndex);
		FD_ZERO(&fds);
		FD_SET(fd, &fds);
		if(fd > nfds)
			nfds = fd;

		FD_SET(gAtpCtrl[sAtpIndex].iNotifyReadEnd, &fds);
		if(gAtpCtrl[sAtpIndex].iNotifyReadEnd > nfds)
			nfds = gAtpCtrl[sAtpIndex].iNotifyReadEnd;

		rc = select(nfds + 1, &fds, NULL, NULL, NULL); // block until a byte is received
		if (rc <= 0)
		{
			DBGMSG("****Select returned %d atp=%d\r\n", rc, sAtpIndex);
		}

		ctrl_msg = 0xff;

		if(FD_ISSET(gAtpCtrl[sAtpIndex].iNotifyReadEnd, &fds))
		{
			do
			{
				ret = read(gAtpCtrl[sAtpIndex].iNotifyReadEnd, &ctrl_msg, sizeof(ctrl_msg));
			}while (ret < 0 && errno == EINTR);

			if(ret > 0)
			{
				DBGMSG("%s: parser_p %d receive control message: %d\n", __FUNCTION__, sAtpIndex, ctrl_msg);
			}
		}

		if((ctrl_msg == TEL_ATP_CMD_EXIT_CHAN)
#ifdef AT_PRODUCTION_CMNDS
			|| (ctrl_msg == TEL_ATP_CMD_EXIT_CHAN_AND_START_DIAG)
#endif
		  ) // exit channel
		{
			break;
		}
		else if(ctrl_msg == TEL_ATP_CMD_TRIGGER_PARSER && !FD_ISSET(fd, &fds))
		{
			unsigned char null_buf[1];

			DBGMSG("%s: parser_p %d run atparser to process next command\n", __FUNCTION__, sAtpIndex);
			utlAtParse(aParser_p[sAtpIndex], null_buf, 0);
			continue;
		}
		else if(!FD_ISSET(fd, &fds))
		{
			// incorrect message, ignore it
			continue;
		}

		memset(buffer, 0x00, TEL_AT_CMDSTR_MAX_LEN);
		received = read(fd, buffer, TEL_AT_CMDSTR_MAX_LEN);
		DBGMSG("ATP %d receveid: %d:\n", sAtpIndex, received);

		dbg_dump_string("AT CMD (string)", buffer, received);
		dbg_dump_buffer("AT CMD (buffer)", buffer, received);
		/*
		 * Send bytes and check for more incoming data in loop
		 */
		if (received > 0)
		{
			if ( gAtpCtrl[sAtpIndex].bSmsDataEntryModeOn == TRUE )
			{
				DBGMSG("Currently in SmsDataEntryMode.\n");
				// loop thru the buffer
				for (i = 0; i < received; i++)
				{
					switch (buffer[i])
					{
					/* Skip "\r\n" */
					case 0x0a:
					case 0x0d:
						break;

					case 0x1a:   //control-z
//					case 'z': //[Jerry] temp test
						ciSendMsgAfterCtrlZ( sAtpIndex, SmsMsgData, SmsMsgLen );
						gAtpCtrl[sAtpIndex].bSmsDataEntryModeOn = FALSE;
						SmsMsgLen = 0;
						memset(SmsMsgData, 0, sizeof(SmsMsgData));
						memset(buffer, 0, TEL_AT_CMDSTR_MAX_LEN);
						i = received;
						break;

					case 0x1b:  //escape
					{
						ciSendMsgAfterEsc(sAtpIndex);
						gAtpCtrl[sAtpIndex].bSmsDataEntryModeOn = FALSE;
						SmsMsgLen = 0;
						memset(SmsMsgData, 0, sizeof(SmsMsgData));
						memset(buffer, 0, TEL_AT_CMDSTR_MAX_LEN);
						i = received;
						break;
					}
					default:
						/* Copy SMS PDU one byte each time */
						memcpy(SmsMsgData + SmsMsgLen, buffer + i, 1);
						SmsMsgLen++;
						break;
					}       // end switch
				}               // end for loop
			}
			else
			{
				/*
				 *  Parse the Data to AT parser
				 */
				DBGMSG("[%s](length=%d):%s\n", __FUNCTION__, received, buffer);
				utlAtParse(aParser_p[sAtpIndex], (unsigned char *)buffer, received);
				memset(buffer, 0, TEL_AT_CMDSTR_MAX_LEN);
			}

		}
		else if (sAtpIndex == TEL_MODEM_AT_CMD_ATP)
		{
			DPRINTF("Modem tty port may be closed by USB ACM driver\n");
			break;
		}
	}
	if (sAtpIndex == TEL_MODEM_AT_CMD_ATP)
	{
		DBGMSG("###########################out of while !!!!");
		OSATaskDelete(gAtpCtrl[TEL_MODEM_AT_CMD_ATP].taskRef);
		bTerminated[TEL_MODEM_AT_CMD_ATP] = 1;
		close(gAtpCtrl[TEL_MODEM_AT_CMD_ATP].iFd);
		gAtpCtrl[TEL_MODEM_AT_CMD_ATP].iFd = -1;

		deactive_ps_connection(sAtpIndex);

		pthread_mutex_lock(&modem_thread_mutex);
		is_modem_thread_running = 0;
		pthread_cond_broadcast(&modem_thread_cond);
		pthread_mutex_unlock(&modem_thread_mutex);
	}
#ifdef AT_PRODUCTION_CMNDS
	if(sAtpIndex == TEL_PROD_AT_CMD_ATP)
	{
		DBGMSG("%s: production at channel closed\n", __FUNCTION__);
		OSATaskDelete(gAtpCtrl[TEL_PROD_AT_CMD_ATP].taskRef);
		close(gAtpCtrl[sAtpIndex].iFd);
		gAtpCtrl[sAtpIndex].iFd = -1;
		gAtpCtrl[sAtpIndex].bEnable = FALSE;
		bTerminated [sAtpIndex] = TRUE;
		if(ctrl_msg == TEL_ATP_CMD_EXIT_CHAN_AND_START_DIAG)
			start_diag();
	}
#endif
}

BOOL tcInit( char * ext_serial_path, char* modem_serial_path)
{
	OS_STATUS osaStatus;
	int i;
	void *taskStack;

	F_ENTER();

	//
	// Init Variable
	//

	for ( i = 0; i < NUM_OF_TEL_ATP; i++)
	{
		int fd[2];
		gAtpCtrl[i].bSmsDataEntryModeOn = FALSE;
		gAtpCtrl[i].bEnable = FALSE;
		gAtpCtrl[i].iFd = -1;
		gAtpCtrl[i].index = i;
		if(pipe(fd) < 0)
		{
			ERRMSG("%s: create pipe error: %s", __FUNCTION__, strerror(errno));
			return FALSE;
		}
		gAtpCtrl[i].iNotifyReadEnd = fd[0];
		gAtpCtrl[i].iNotifyWriteEnd = fd[1];
		fcntl(gAtpCtrl[i].iNotifyReadEnd, F_SETFL, O_NONBLOCK);
	}

	gAtpCtrl[TEL_AT_CMD_ATP_0].path = BACKEND_ATCMD_CHAN_DEVICE_0;
	gAtpCtrl[TEL_AT_CMD_ATP_1].path = BACKEND_ATCMD_CHAN_DEVICE_1;
	gAtpCtrl[TEL_AT_CMD_ATP_2].path = BACKEND_ATCMD_CHAN_DEVICE_2;
	gAtpCtrl[TEL_AT_CMD_ATP_3].path = BACKEND_ATCMD_CHAN_DEVICE_3;
	gAtpCtrl[TEL_AT_CMD_ATP_4].path = BACKEND_ATCMD_CHAN_DEVICE_4;
	gAtpCtrl[TEL_AT_CMD_ATP_5].path = BACKEND_ATCMD_CHAN_DEVICE_5;
	gAtpCtrl[TEL_AT_CMD_ATP_6].path = BACKEND_ATCMD_CHAN_DEVICE_6;
	gAtpCtrl[TEL_AT_CMD_ATP_7].path = BACKEND_ATCMD_CHAN_DEVICE_7;

	gAtpCtrl[TEL_TEST_AT_CMD_ATP].path = BACKEND_TEST_ATCMD_CHAN_DEVICE;
	gAtpCtrl[TEL_AGPS_AT_CMD_ATP].path = BACKEND_AGPS_ATCMD_CHAN_DEVICE;
	gAtpCtrl[TEL_SIMAL_AT_CMD_ATP].path = BACKEND_SIMAL_ATCMD_CHAN_DEVICE;

	gAtpCtrl[TEL_ESP_AT_CMD_ATP].path = ext_serial_path;
	gAtpCtrl[TEL_MODEM_AT_CMD_ATP].path = modem_serial_path;

#ifdef AT_PRODUCTION_CMNDS
	if(get_bspflag_from_kernel_cmdline() == 2)
	{
		init_at_prod_conn();
		gAtpCtrl[TEL_PROD_AT_CMD_ATP].path = PROD_SERIAL_PORT;
		tcInitAtParser(&gAtpCtrl[TEL_PROD_AT_CMD_ATP].index);
		start_prod_at_cmd_srv();
	}
#endif

	/*
	 *  Create thread to read each port, 40 means "(null)"
	 */
	if ( gAtpCtrl[TEL_ESP_AT_CMD_ATP].path[0] != 40 )
	{
		DBGMSG("Setting up for external serial port:%s.\n", gAtpCtrl[TEL_ESP_AT_CMD_ATP].path);

		taskStack = utlMalloc(OSA_STACK_SIZE);
		if(taskStack == NULL)
		{
			DPRINTF("malloc OSA_TASK error!\n");
			return FALSE;
		}
		// External Serial Port
		tcOpenExtSerialPort(&gAtpCtrl[TEL_ESP_AT_CMD_ATP].iFd, gAtpCtrl[TEL_ESP_AT_CMD_ATP].path, O_RDWR | O_NOCTTY);

		tcInitAtParser(&gAtpCtrl[TEL_ESP_AT_CMD_ATP].index);

		osaStatus  = OSATaskCreate(&gAtpCtrl[TEL_ESP_AT_CMD_ATP].taskRef,
					   taskStack, OSA_STACK_SIZE, ESP_TASK_PRIORITY,
					   (CHAR *)"ESP_READ_TASK", (void*)ProcessAtChanThread, (void *)TEL_ESP_AT_CMD_ATP);
		if ( osaStatus != OS_SUCCESS)
		{
			DPRINTF("OSATaskCreate error!\n");
			utlFree(taskStack);
			return FALSE;
		}
		gAtpCtrl[TEL_ESP_AT_CMD_ATP].bEnable = TRUE;

	}
	tcInitAtParser(&gAtpCtrl[TEL_MODEM_AT_CMD_ATP].index);
	for (i = TEL_AT_CMD_ATP_0; i < TEL_ESP_AT_CMD_ATP; i++)
	{
		DBGMSG("Setting up for AT Command Channel: %d.\n", i);

		tcOpenDevice(&gAtpCtrl[i].iFd, gAtpCtrl[i].path, O_RDWR | O_NOCTTY );
		if (gAtpCtrl[i].iFd <= 0)
			return FALSE;

		tcInitAtParser(&gAtpCtrl[i].index);

		taskStack = utlMalloc(OSA_STACK_SIZE);
		if(taskStack == NULL)
		{
			DPRINTF("malloc OSA_TASK error!\n");
			return FALSE;
		}

		osaStatus  = OSATaskCreate(&gAtpCtrl[i].taskRef,
					   taskStack, OSA_STACK_SIZE,
					   AT_TASK_PRIORITY, (CHAR *)"AT_READ_TASK",
					   (void *)ProcessAtChanThread,
					   (void *)i);
		if ( osaStatus != OS_SUCCESS)
		{
			DPRINTF("OSATaskCreate error!\n");
			utlFree(taskStack);
			return FALSE;
		}
		gAtpCtrl[i].bEnable = TRUE;
	}

	F_LEAVE();
	return TRUE;
}

BOOL tcInitAtParser( TelAtParserID * sAtpIndex )
{

	F_ENTER();
	int index = *sAtpIndex;
	DBGMSG("ATP Index: %d.\n", index);

	/* Enable AT Parser*/
	/*
	 *  Opens a new AT command parser with the array of utlAtCommand_T structures
	 */
	if ((aParser_p[index] = utlOpenAtParser(shell_commands,
						utlNumberOf(shell_commands), sAtpIndex)) == NULL)
	{
		DPRINTF("%s: utlOpenAtParser(%d) failed\n", __FUNCTION__, index);
		return FALSE;
	}

	//
	//  Set the reply handler function
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_REPLY_HANDLER, atParserShellReplyFunction) != utlSUCCESS)
	{
		ERRMSG("Cannot set reply handler\n");
		return FALSE;
	}

	/*
	   //
	   // Set the sParameter Function
	   //
	   if (utlAtParserOp(aParser_p[*sAtpIndex], utlAT_PARSER_OP_SET_S_PARAMETER_HANDLER, sParameterFunction) != utlSUCCESS) {
	   fprintf(stderr, "atParserShell: utlAtParserOp(1.2) failed\n");
	   return false;
	   }

	   //
	   // Set the Driver Request handler
	   //
	   if (utlAtParserOp(aParser_p[*sAtpIndex], utlAT_PARSER_OP_SET_DRIVER_REQUEST_HANDLER, driverRequestFunction) != utlSUCCESS) {
	   fprintf(stderr, "atParserShell: utlAtParserOp(1.3) failed\n");
	   return false;
	   }
	 */

	//
	// Turn off ECHO
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_ECHO_OFF) != utlSUCCESS)
	{
		ERRMSG("Cannot turn off ECHO\n");
		return FALSE;
	}

	//
	// Set the AT Parser ID Name
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_ID, ATM_ID) != utlSUCCESS)
	{
		ERRMSG("Set AT Parser ID Name Error\n");
		return FALSE;
	}

	//
	// Set the Manufacturer ID
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_MANUFACTURER, ATM_MANUFACTURER_ID) != utlSUCCESS)
	{
		ERRMSG("Set Manufacturer ID Error\n");
		return FALSE;
	}

	//
	// Set Model ID
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_MODEL, ATM_MODEL_ID) != utlSUCCESS)
	{
		ERRMSG("Set Model ID Error\n");
		return FALSE;
	}

	//
	// Set Revision ID
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_REVISION, ATM_REVISION_ID) != utlSUCCESS)
	{
		ERRMSG("Set Revision ID Error\n");
		return FALSE;
	}

	//
	// Set serial number
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_SERIAL_NUMBER, ATM_SERIAL_NUMBER) != utlSUCCESS)
	{
		ERRMSG("Set Serial Number Error\n");
		return FALSE;
	}

	//
	// Set the object ID
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_OBJECT_ID, ATM_OBJ_ID) != utlSUCCESS)
	{
		ERRMSG("utlAtParserOp(1.10) failed\n");
		return FALSE;
	}

	//
	// Set Country Code
	//
	if (utlAtParserOp(aParser_p[index], utlAT_PARSER_OP_SET_COUNTRY_CODE, ATM_COUNTRY_CODE) != utlSUCCESS)
	{
		ERRMSG("Set Country Code Error\n");
		return FALSE;
	}

	F_LEAVE();
	return TRUE;
}

BOOL tcOpenExtSerialPort(int *fd, char * serial_path, int flag )
{

	F_ENTER();

	tcOpenDevice(fd, serial_path, flag);

	if (*fd <= 0)
	{
		F_LEAVE();
		return FALSE;
	}


	/*
	 *  The following will handle the physical serial port setting
	 */

	struct termios newtio;       //place for old and new port settings for serial port

	memset(&newtio, 0x0, sizeof(newtio));

	// Make the file descriptor asynchronous (the manual page says only
	// O_APPEND and O_NONBLOCK, will work with F_SETFL...)
	fcntl(*fd, F_SETFL, 0);

	tcgetattr(*fd, &savetio); // save current port settings

	// set new port settings for canonical input processing
	newtio.c_cflag = BAUD | CRTSCTS | DATABITS | STOPBITS | PARITYON | PARITY | CLOCAL | CREAD;
	newtio.c_iflag = IGNPAR;
	newtio.c_oflag = 0;
	newtio.c_lflag =  0;       //ICANON;
	newtio.c_cc[VMIN] = 1;
	newtio.c_cc[VTIME] = 0;
	newtio.c_cc[VERASE] = 0x8;
	newtio.c_cc[VEOL] = 0xD;

	newtio.c_cc[VINTR]    = 0;      /* Ctrl-c */
	newtio.c_cc[VQUIT]    = 0;      /* Ctrl-\ */
	newtio.c_cc[VERASE]   = 0;      /* del */
	newtio.c_cc[VKILL]    = 0;      /* @ */
	newtio.c_cc[VEOF]     = 4;      /* Ctrl-d */
	newtio.c_cc[VTIME]    = 0;      /* inter-character timer unused */
	newtio.c_cc[VMIN]     = 1;      /* blocking read until 1 character arrives */
	newtio.c_cc[VSWTC]    = 0;      /* '\0' */
	newtio.c_cc[VSTART]   = 0;      /* Ctrl-q */
	newtio.c_cc[VSTOP]    = 0;      /* Ctrl-s */
	newtio.c_cc[VSUSP]    = 0;      /* Ctrl-z */
	newtio.c_cc[VEOL]     = 0;      /* '\0' */
	newtio.c_cc[VREPRINT] = 0;      /* Ctrl-r */
	newtio.c_cc[VDISCARD] = 0;      /* Ctrl-u */
	newtio.c_cc[VWERASE]  = 0;      /* Ctrl-w */
	newtio.c_cc[VLNEXT]   = 0;      /* Ctrl-v */
	newtio.c_cc[VEOL2]    = 0;      /* '\0' */

	newtio.c_cc[VMIN] = 1;
	newtio.c_cc[VTIME] = 0;
	newtio.c_cc[VERASE] = 0x8;
	newtio.c_cc[VEOL] = 0xD;

	tcflush(*fd, TCIFLUSH);
	tcsetattr(*fd, TCSANOW, &newtio);

	F_LEAVE();

	return TRUE;
}

BOOL tcOpenDevice(int* fd, char * char_dev_path, int flag)
{
	F_ENTER();
	/*open the device(com port) to be non-blocking (read will return immediately) */
	*fd = open(char_dev_path, flag  );

	if (*fd <= 0)
	{
		DPRINTF("Error opening device %s\n", char_dev_path);
		return FALSE;
	}

	DBGMSG("Opened %s, fd is: %d.\n", char_dev_path, *fd);

	F_LEAVE();
	return TRUE;
}


int tcWriteParser(TelAtParserID sAtpIndex, char * string, int len)
{
	F_ENTER();

	int fd;
	ssize_t size;
	fd = getFd(sAtpIndex);

	if (fd <= 0)
	{
		ERRMSG("Wrong AT Parser ID- sAtpIndex: %d, fd: %d\n", sAtpIndex, fd);
		return -1;
	}

	size = write(fd, string, len);

	eeh_log(LOG_NOTICE, "%s: writing to fd %d with len: %d for string: %s\n", __FUNCTION__, fd, size, string);
	fsync(fd);

	F_LEAVE();
	return (int)size;
}


/******************************************************************************
*   AT Parser Callback function
******************************************************************************/
utlReturnCode_T atParserShellReplyFunction(const char *string_p, void *arg_p)
{

	/*
	 *  Dumping the reply to stdout
	 */
	TelAtParserID * sATP_p = arg_p;

	DBGMSG("ShellReply: %s on index: %d\n", string_p, *sATP_p);

	/*
	 *  If there is socket attached, dump it to the socket as well
	 */

	tcWriteParser(*sATP_p, (char *)string_p, strlen(string_p));
	return utlSUCCESS;
}

utlReturnCode_T atParserShellGetFunction(const utlAtParameterOp_T op,
					 const char                      *command_name_p,
					 const utlAtParameterValue_P2c parameter_values_p,
					 const size_t num_parameters,
					 const char                      *info_text_p,
					 unsigned int                    *xid_p,
					 void                            *arg_p)
{
	UNUSEDPARAM(op)
	UNUSEDPARAM(command_name_p)
	UNUSEDPARAM(parameter_values_p)
	UNUSEDPARAM(num_parameters)

	char tempBuf[200];
	*xid_p = MAKE_AT_HANDLE(*(TelAtParserID *)arg_p);

	DBGMSG("%s: %s\n", __FUNCTION__, command_name_p);
	DBGMSG("\t*info_text_p = %s\n", info_text_p);
	if(NULL != info_text_p)
	{
		strncpy(tempBuf, info_text_p, sizeof(tempBuf));
		tempBuf[sizeof(tempBuf) - 1] = '\0';
	}
	else tempBuf[0] = '\0';

	ATRESP(*xid_p, ATCI_RESULT_CODE_OK, 0, tempBuf);
	return utlSUCCESS;
}

/*------------------------------------------------------------------------------*/
utlReturnCode_T atParserShellSetFunction(const utlAtParameterOp_T op,
					 const char                      *command_name_p,
					 const utlAtParameterValue_P2c parameter_values_p,
					 const size_t num_parameters,
					 const char                      *info_text_p,
					 unsigned int                    *xid_p,
					 void                            *arg_p)
{
	UNUSEDPARAM(op)
	UNUSEDPARAM(command_name_p)
	UNUSEDPARAM(parameter_values_p)
	UNUSEDPARAM(num_parameters)
	UNUSEDPARAM(info_text_p)

	* xid_p = MAKE_AT_HANDLE(*(TelAtParserID *)arg_p);
	char tempBuf[400];
	DBGMSG("Set command: %s\n", command_name_p);
	DBGMSG("\t*info_text_p = %s\n", info_text_p);
	if(NULL != info_text_p)
	{
		strncpy(tempBuf, info_text_p, sizeof(tempBuf));
		tempBuf[sizeof(tempBuf) - 1] = '\0';
	}
	else tempBuf[0] = '\0';
	
	ATRESP(*xid_p, ATCI_RESULT_CODE_OK, 0, tempBuf);
	return utlSUCCESS;
}

/************************************************************************************
 * F@: ciAT - Process the command "AT"
 *
 */
utlReturnCode_T ciAT(            const utlAtParameterOp_T op,
				 const char                      *command_name_p,
				 const utlAtParameterValue_P2c parameter_values_p,
				 const size_t num_parameters,
				 const char                      *info_text_p,
				 unsigned int                    *xid_p,
				 void                            *arg_p)
{
	UNUSEDPARAM(op)
	UNUSEDPARAM(command_name_p)
	UNUSEDPARAM(parameter_values_p)
	UNUSEDPARAM(num_parameters)
	UNUSEDPARAM(info_text_p)

	TelAtParserID sAtpIndex = *(TelAtParserID *)arg_p;

	UINT32 atHandle = AT_RESV_HANDLE(sAtpIndex, 2);

	*xid_p = atHandle;

	DBGMSG("%s: atHandle:%d, gServiceGroupRegistered:%d\n", __FUNCTION__, atHandle, gServiceGroupRegistered);

	if (gServiceGroupRegistered > CI_SG_NUMIDS)
		ATRESP(atHandle, ATCI_RESULT_CODE_OK, 0, NULL);

	return utlSUCCESS;
}

#ifdef AT_PRODUCTION_CMNDS
unsigned char prod_tast_stack[OSA_STACK_SIZE];
int start_prod_at_cmd_srv(void)
{
	OS_STATUS osaStatus;
	struct termios tio;
	memset(&tio, 0x0, sizeof(tio));
	if(tcOpenDevice(&gAtpCtrl[TEL_PROD_AT_CMD_ATP].iFd, gAtpCtrl[TEL_PROD_AT_CMD_ATP].path, O_RDWR) == FALSE)
	{
		DPRINTF("open path: %s error\n", gAtpCtrl[TEL_PROD_AT_CMD_ATP].path);
		return FALSE;
	}

	memset(&tio, 0, sizeof(tio));

	/* Configure termios */
	tio.c_cflag = BAUD | CS8 | CLOCAL | CREAD;
	tio.c_iflag = 0;
	//tio.c_iflag = IGNPAR;
	tio.c_oflag = 0;
	tio.c_lflag = 0;
	tio.c_cc[VMIN] = 1;
	tio.c_cc[VTIME]= 0;
	tcflush(gAtpCtrl[TEL_PROD_AT_CMD_ATP].iFd, TCIOFLUSH); //flush both data received but not read and data written but not transmitted.
	tcsetattr(gAtpCtrl[TEL_PROD_AT_CMD_ATP].iFd, TCSANOW, &tio); //the change shall occur immediately

	bTerminated[TEL_PROD_AT_CMD_ATP] = FALSE;

	osaStatus  = OSATaskCreate(&gAtpCtrl[TEL_PROD_AT_CMD_ATP].taskRef,
				   prod_tast_stack, OSA_STACK_SIZE, ESP_TASK_PRIORITY,
				   (CHAR *)"PROD_READ_TASK", (void*)ProcessAtChanThread, (void *)TEL_PROD_AT_CMD_ATP);

	if ( osaStatus != OS_SUCCESS)
	{
		DPRINTF("OSATaskCreate error!\n");
		return FALSE;
	}
	gAtpCtrl[TEL_PROD_AT_CMD_ATP].bEnable = TRUE;

	return TRUE;
}

int stop_prod_at_cmd_srv(int b_start_diag)
{
	unsigned char cmd;

	if(b_start_diag)
		cmd = TEL_ATP_CMD_EXIT_CHAN_AND_START_DIAG;
	else
		cmd = TEL_ATP_CMD_EXIT_CHAN;

	if(notifyAtParser(TEL_PROD_AT_CMD_ATP, cmd) < 0)
		return FALSE;
	else
		return TRUE;
}
#endif

